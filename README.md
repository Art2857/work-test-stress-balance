# Тестовое задание для Node.js developer

## Задание 1. Создать простое webApp

Создать простое webApp, используя Node.js (Express), PostgreSQL (Sequelize ORM).

### Требования:

- При запуске приложение должно создать в базе данных таблицу **"users"** с помощью миграции
- Добавить один пользовательский аккаунт с полем **"balance"** со значением **10000**
- Использовать библиотеку **"Umzug"** для управления миграциями
- Написать route для обновления баланса пользователя (параметры: `userId` и `amount`)
- **Важно**: баланс пользователя не может быть отрицательным
- Изменение баланса должно производиться в реальном времени

### Нагрузочное тестирование:

Задание тестируется отправкой **10000 запросов** одновременно на попытку снять с баланса пользователя по **2 единицы**.

**Ожидаемый результат:**

- **5000 запросов** должны отработать успешно
- **5000 запросов** должны получить ошибку о недостаточности средств

---

## Установка

```bash
npm install
```

## Запуск

### 1. Запустите PostgreSQL

```bash
docker-compose -f docker-compose.local.yml up -d
```

### 2. Скопируйте файл окружения

```bash
cp .env.example .env
```

### 3. Соберите и запустите приложение

```bash
npm run build
npm start
```

**Для разработки:**

```bash
npm run dev
```

## Нагрузочное тестирование

```bash
npm run test:load
```

Тест отправляет **10000 одновременных запросов** на снятие по 2 единицы с баланса пользователя.
